function SortQuartz(){0==g_sortitem?$(".master-quartz-type-filter").removeClass("disabled"):$(".master-quartz-type-filter").addClass("disabled");for(var n=0;n<g_curmq.length;++n)g_curmq[n].context=n;0==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.type<t.type?-1:n.type>t.type?1:n.id<t.id?-1:n.id>t.id?1:n.lv<t.lv?-1:1}):g_curmq.sort(function(n,t){return n.type>t.type?-1:n.type<t.type?1:n.id>t.id?-1:n.id<t.id?1:n.lv<t.lv?-1:1}):1==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.lv<t.lv?-1:n.lv>t.lv?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.lv>t.lv?-1:n.lv<t.lv?1:n.context<t.context?-1:1}):2==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.elem[0]<t.elem[0]?-1:n.elem[0]>t.elem[0]?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.elem[0]>t.elem[0]?-1:n.elem[0]<t.elem[0]?1:n.context<t.context?-1:1}):3==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.elem[1]<t.elem[1]?-1:n.elem[1]>t.elem[1]?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.elem[1]>t.elem[1]?-1:n.elem[1]<t.elem[1]?1:n.context<t.context?-1:1}):4==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.elem[2]<t.elem[2]?-1:n.elem[2]>t.elem[2]?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.elem[2]>t.elem[2]?-1:n.elem[2]<t.elem[2]?1:n.context<t.context?-1:1}):5==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.elem[3]<t.elem[3]?-1:n.elem[3]>t.elem[3]?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.elem[3]>t.elem[3]?-1:n.elem[3]<t.elem[3]?1:n.context<t.context?-1:1}):6==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.elem[4]<t.elem[4]?-1:n.elem[4]>t.elem[4]?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.elem[4]>t.elem[4]?-1:n.elem[4]<t.elem[4]?1:n.context<t.context?-1:1}):7==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.elem[5]<t.elem[5]?-1:n.elem[5]>t.elem[5]?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.elem[5]>t.elem[5]?-1:n.elem[5]<t.elem[5]?1:n.context<t.context?-1:1}):8==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.elem[6]<t.elem[6]?-1:n.elem[6]>t.elem[6]?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.elem[6]>t.elem[6]?-1:n.elem[6]<t.elem[6]?1:n.context<t.context?-1:1}):9==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.hp<t.hp?-1:n.hp>t.hp?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.hp>t.hp?-1:n.hp<t.hp?1:n.context<t.context?-1:1}):10==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.ep<t.ep?-1:n.ep>t.ep?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.ep>t.ep?-1:n.ep<t.ep?1:n.context<t.context?-1:1}):11==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.str<t.str?-1:n.str>t.str?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.str>t.str?-1:n.str<t.str?1:n.context<t.context?-1:1}):12==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.def<t.def?-1:n.def>t.def?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.def>t.def?-1:n.def<t.def?1:n.context<t.context?-1:1}):13==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.ats<t.ats?-1:n.ats>t.ats?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.ats>t.ats?-1:n.ats<t.ats?1:n.context<t.context?-1:1}):14==g_sortitem?0==g_sortorder?g_curmq.sort(function(n,t){return n.adf<t.adf?-1:n.adf>t.adf?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.adf>t.adf?-1:n.adf<t.adf?1:n.context<t.context?-1:1}):15==g_sortitem&&(0==g_sortorder?g_curmq.sort(function(n,t){return n.spd<t.spd?-1:n.spd>t.spd?1:n.context<t.context?-1:1}):g_curmq.sort(function(n,t){return n.spd>t.spd?-1:n.spd<t.spd?1:n.context<t.context?-1:1}))}function UpdateDisplay(){var e=$("#tbl"),r,o,s,f,i,n,t,h,u;for(e.html(""),r="",r+='<thead><tr class="table-tr-link">',i=0;i<g_col.length;++i)t='<td data-sort="'+i+'" class="master-quartz-sort',i==g_sortitem&&(t+=" col-sort"),i>=9&&i<=15&&(t+=" text-right"),t+='">',i==g_sortitem&&(t+=0==g_sortorder?'<span class="glyphicon glyphicon-triangle-top"><\/span>':'<span class="glyphicon glyphicon-triangle-bottom"><\/span>'),t+=g_col[i],t+="<\/td>",r+=t;for(r+='<td class="table-td-nolink">'+g_colhg+"<\/td>",r+='<td class="table-td-nolink">'+g_colab+"<\/td>",r+="<\/tr><\/thead>",o=0,i=0;i<5;++i)1<<i&g_filter&&++o;if(0!=o){for(r+="<tbody>",s="",f=-1,i=0;i<g_curmq.length;++i)if(n=g_curmq[i],t="<tr>",0!=(1<<n.lv-1&g_filter)){if(s!=n.namej){for(s=n.namej,h=0,u=i;u<g_curmq.length;++u){if(g_curmq[u].id!=n.id)break;0!=(1<<g_curmq[u].lv-1&g_filter)&&++h}t+='<td style="vertical-align:middle;" rowspan="'+h+'"';0==g_sortitem&&(t+=' class="col-sort"');t+=">";f!=n.type&&(f=n.type,t+='<a name="type'+f+'"><\/a>');t+='<img src="/images/mq/'+n.id+'.png" width="41px" height="41px"><\/img>';t+=n.namej;n.namen.length>0&&(t+="("+n.namen+")");t+="<\/td>"}t+='<td class="qrz-rank-'+n.lv+(1==g_sortitem?" col-sort":"")+'">'+n.lv+"<\/td>";t+='<td class="orb0'+(2==g_sortitem?" col-sort":"")+'">'+(n.elem[0]>0?n.elem[0]:"")+"<\/td>";t+='<td class="orb1'+(3==g_sortitem?" col-sort":"")+'">'+(n.elem[1]>0?n.elem[1]:"")+"<\/td>";t+='<td class="orb2'+(4==g_sortitem?" col-sort":"")+'">'+(n.elem[2]>0?n.elem[2]:"")+"<\/td>";t+='<td class="orb3'+(5==g_sortitem?" col-sort":"")+'">'+(n.elem[3]>0?n.elem[3]:"")+"<\/td>";t+='<td class="orb4'+(6==g_sortitem?" col-sort":"")+'">'+(n.elem[4]>0?n.elem[4]:"")+"<\/td>";t+='<td class="orb5'+(7==g_sortitem?" col-sort":"")+'">'+(n.elem[5]>0?n.elem[5]:"")+"<\/td>";t+='<td class="orb6'+(8==g_sortitem?" col-sort":"")+'">'+(n.elem[6]>0?n.elem[6]:"")+"<\/td>";t+='<td class="text-right'+(9==g_sortitem?" col-sort":"")+'">'+n.hp+"<\/td>";t+='<td class="text-right'+(10==g_sortitem?" col-sort":"")+'">'+n.ep+"<\/td>";t+='<td class="text-right'+(11==g_sortitem?" col-sort":"")+'">'+n.str+"<\/td>";t+='<td class="text-right'+(12==g_sortitem?" col-sort":"")+'">'+n.def+"<\/td>";t+='<td class="text-right'+(13==g_sortitem?" col-sort":"")+'">'+n.ats+"<\/td>";t+='<td class="text-right'+(14==g_sortitem?" col-sort":"")+'">'+n.adf+"<\/td>";t+='<td class="text-right'+(15==g_sortitem?" col-sort":"")+'">'+n.spd+"<\/td>";t+="<td>"+n.howg+"<\/td>";t+=g_desc?"<td>"+n.abi0+"<br/>"+n.abi1+"<\/td>":'<td><span class="master-quartz-desc" data-toggle="tooltip" data-placement="left" title="'+n.abi0+"<br/>"+n.abi1+'"><span class="glyphicon glyphicon-comment text-success"><\/span><\/span><\/td>';t+="<\/tr>";r+=t}r+="<\/tbody>";e.html(r);e.AffixThead(g_AffixThead);0==g_desc&&$("body").tooltip({selector:'[data-toggle="tooltip"]',html:!0})}}var g_col=[g_colname,g_collv,'<span class="orbi0"><\/span>','<span class="orbi1"><\/span>','<span class="orbi2"><\/span>','<span class="orbi3"><\/span>','<span class="orbi4"><\/span>','<span class="orbi5"><\/span>','<span class="orbi6"><\/span>',"HP","EP","STR","DEF","ATS","ADF","SPD",],g_sortitem=0,g_sortorder=0,g_filter=31,g_desc=0,g_curmq=[];$(document).ready(function(){for(var r,u,t,n,f,i=0;i<g_mq.length;++i)for(r=g_mq[i],u=g_mqn[i],t=0;t<5;++t)n=r.lv[t],f=u.lv[t],g_curmq.push({id:r.id,type:r.type,namej:r.namej,namen:u.namen,howg:u.howg,lv:t+1,hp:n.hp,ep:n.ep,str:n.str,def:n.def,ats:n.ats,adf:n.adf,spd:n.spd,abi0:f.abi0,abi1:f.abi1,elem:n.elem});SortQuartz();UpdateDisplay()});$("body").on("click",".master-quartz-sort",function(){var n=$(this).attr("data-sort");!n||n<0||n>=g_col.length||(n==g_sortitem?g_sortorder^=1:(g_sortitem=n,g_sortorder=n>0?1:0),SortQuartz(),UpdateDisplay())});$(".master-quartz-level-filter").click(function(){var n=$(this).find("span"),t=$(this).attr("data-level");!n||1!=n.length||!t||t<0||t>4||(n=n[0],$(n).hasClass("glyphicon-ok")?($(n).removeClass("glyphicon-ok"),g_filter&=~(1<<t)):($(n).addClass("glyphicon-ok"),g_filter|=1<<t),UpdateDisplay())});$(".master-quartz-desc-filter").click(function(){var n=$(this).find("span");n&&1==n.length&&(n=n[0],$(n).hasClass("glyphicon-ok")?$(n).removeClass("glyphicon-ok"):$(n).addClass("glyphicon-ok"),g_desc^=1,UpdateDisplay())});