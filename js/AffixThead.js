$.fn.AffixThead=function(n){var r=0,f,e,h,o,i,t,u,s;if(typeof n=="string"){if(n=="create"){if(t=this.find("thead"),1!=t.length)return;r=this.data("AffixThead-topr");r||(r=this.data("AffixThead-top"));i=$("<table><\/table").attr("class",this.attr("class")).addClass("AffixThead-table").attr("style","position:fixed;display:block;z-index:1001").css("top",r).css("left",t.offset().left).append(t.clone().removeClass("AffixThead"));this.data("AffixThead-tbl",i);this.before(i);n="update"}if(n=="update"){if(t=this.find("thead"),1!=t.length)return;if(i=this.data("AffixThead-tbl"),!i)return;f=this.find("tr");e=i.find("tr");f.length>0&&1==e.length&&(h=e.children(),o=0,f.first().children().each(function(n,t){o+=t.offsetWidth;$(h[n]).css("width",t.offsetWidth+"px")}),i.css("width",o+"px"))}return}(n&&n.top&&(r=n.top),i=this.data("AffixThead-tbl"),i&&i.remove(),t=this.find("thead"),0!=t.length)&&(this.data("AffixThead-top",r),this.removeData("AffixThead-tbl"),t.addClass("AffixThead"),n.srl?(u=$(n.srl),this.data("AffixThead-srl",u),u.unbind("scroll"),u.scroll(function(n){var t=$(n.target).find(".AffixThead");t.each(function(n,t){var i=$(t).parent(),e=i.data("AffixThead-srl"),r=i.data("AffixThead-tbl"),u=i.data("AffixThead-top"),o=e.scrollTop(),f=e.offset().top;$(t).offset().top<f+u&&i.offset().top+i.height()>f+u+$(t).height()?r?r.removeClass("hidden"):(i.data("AffixThead-topr",f+u),i.AffixThead("create")):r&&r.addClass("hidden")})})):(s=$(window).scrollTop(),t.height(),t.offset().top-s<r&&this.offset().top+this.height()-s>r+t.height()&&this.AffixThead("create")))};$(window).resize(function(){var n=$(".AffixThead");n.each(function(n,t){$(t).parent().AffixThead("update")})});$(window).scroll(function(){var t=$(".AffixThead"),n=$(window).scrollTop();t.each(function(t,i){var r=$(i).parent(),u=r.data("AffixThead-tbl"),f=r.data("AffixThead-top");$(i).offset().top-n<f&&r.offset().top+r.height()-n>f+$(i).height()?u?u.removeClass("hidden"):r.AffixThead("create"):u&&u.addClass("hidden")})});